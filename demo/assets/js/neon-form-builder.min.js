"use strict";function formBuilderHelpersFn(e,t){var a={doCancel:!1},o=fbUtils;return t.events=formBuilderEventsFn(),a.makeClassName=function(e){return e=e.replace(/[^\w\s\-]/gi,""),o.hyphenCase(e)},a.mobileClass=function(){var e="";return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=" fb-mobile")}(navigator.userAgent||navigator.vendor||window.opera),e},a.startMoving=function(e,o){o.item.show().addClass("moving"),t.controlItemDomList?a.startIndex=t.controlItemDomList().index(o.item):a.startIndex=$(this).children().index(o.item)},a.stopMoving=function(e,t){t.item.removeClass("moving"),a.doCancel&&($(t.sender).sortable("cancel"),$(this).sortable("cancel")),a.save(),a.doCancel=!1},a.beforeStop=function(t,o){var s=document.getElementById(e.formID),i=s.children.length-1,n=[];a.stopIndex=o.placeholder.index()-1,!e.sortableControls&&o.item.parent().hasClass("frmb-control")&&n.push(!0),e.prepend&&n.push(0===a.stopIndex),e.append&&n.push(a.stopIndex+1===i),a.doCancel=n.some(function(e){return e===!0})},a.safename=function(e){return e.replace(/\s/g,"-").replace(/[^a-zA-Z0-9\-]/g,"").toLowerCase()},a.forceNumber=function(e){return e.replace(/[^0-9]/g,"")},a.initTooltip=function(e){var t=e.find(".tooltip");e.mouseenter(function(){t.outerWidth()>200&&t.addClass("max-width"),t.css("left",e.width()+14),t.stop(!0,!0).fadeIn("fast")}).mouseleave(function(){e.find(".tooltip").stop(!0,!0).fadeOut("fast")}),t.hide()},a.getTypes=function(e){var t={type:e.attr("type")},a=$(".fld-subtype",e).val();return a!==t.type&&(t.subtype=a),t},a.fieldOptionData=function(e){var t=[];return $(".sortable-options li",e).each(function(){var e=$(this),a=$(".option-selected",e).is(":checked"),o={label:$(".option-label",e).val(),value:$(".option-value",e).val()};a&&(o.selected=a),t.push(o)}),$(".input-wrap select > option:selected",e).each(function(){var e=$(this),a={label:$.trim(e.text()),value:e.val(),selected:!0};t.push(a)}),$(".input-wrap input.js_cb_option:checked",e).each(function(){var e=($(this),$(this).is(":checked")),a={label:$(this).attr("data-label"),value:$(this).val()};e&&(a.selected=e),t.push(a)}),t},a.xmlSave=function(e){var t=a.prepData(e),s=["<form-template>\n\t<fields>"];return o.forEach(t,function(e,t){var a=null;if(t.type.match(/(select|checkbox-group|radio-group)/)){for(var i=t.values,n=[],r=0;r<i.length;r++){var l=o.markup("option",i[r].label,i[r]).outerHTML;n.push("\n\t\t\t"+l)}n.push("\n\t\t"),a=n.join(""),delete t.values}var c=o.markup("field",a,t);s.push("\n\t\t"+c.outerHTML)}),s.push("\n\t</fields>\n</form-template>"),s.join("")},a.prepData=function(e){var t=[];return 0!==e.childNodes.length&&o.forEach(e.childNodes,function(e,s){var i=$(s);if(!i.hasClass("disabled")){var n,r;!function(){var e=a.getTypes(i),l=$(".roles-field:checked",s).map(function(){return this.value}).get();if($('[class*="fld-"]',s).each(function(){var t=o.camelCase(this.name);e[t]="checkbox"===this.type?this.checked:this.value}),l.length&&(e.role=l.join(",")),e.className=e.className||e["class"],n=/(?:^|\s)btn-(.*?)(?:\s|$)/g.exec(e.className),n&&(e.style=n[1]),e=o.trimObj(e),e=o.escapeAttrs(e),r=e.type.match(/(select|checkbox-group|radio-group)/),r&&(e.values=a.fieldOptionData(i)),!e.label){var c=$.trim($('[static-attribute-key="label"]',i).text());c&&(e.label=c)}t.push(e)}()}}),t},a.jsonSave=function(e){return window.JSON.stringify(a.prepData(e),null,"\t")},a.getData=function(a){var s=a||e.formData;if(!s)return!1;var i={xml:function(e){return o.parseXML(e)},json:function(e){return window.JSON.parse(e)}};return t.formData=i[e.dataType](s)||[],t.formData},a.save=function(){var o=document.getElementById(e.formID),s={xml:a.xmlSave,json:a.jsonSave};return t.formData=s[e.dataType](o),document.dispatchEvent(t.events.formSaved),t.formData},a.incrementId=function(e){var t=e.lastIndexOf("-"),a=parseInt(e.substring(t+1))+1,o=e.substring(0,t);return o+"-"+a},a.updatePreview=function(t){var s,i=(t.attr("class"),$(t).attr("type")),n=$(".prev-holder",t),r={type:i};$('[class*="fld-"]',t).each(function(){var e=o.camelCase(this.name);r[e]="checkbox"===this.type?this.checked:this.value});var l=$(".btn-style",t).val();l&&(r.style=l),i.match(/(select|checkbox-group|radio-group)/)&&(r.values=[],r.multiple=$('[name="multiple"]',t).is(":checked"),$(".sortable-options li",t).each(function(){var e={};e.selected=$(".option-selected",this).is(":checked"),e.value=$(".option-value",this).val(),e.label=$(".option-label",this).val(),r.values.push(e)}),$(".input-wrap select > option",t).each(function(){var e={};e.selected=$(this).is(":selected"),e.value=$(this).val(),e.label=$.trim($(this).text()),r.values.push(e)}),$(".input-wrap input.js_cb_option",t).each(function(){var e={};e.selected=$(this).is(":checked"),e.value=$(this).val(),e.label=$.trim($(this).attr("data-label")),r.values.push(e)})),r=o.trimObj(r),r.className=a.classNames(t,r),$(".fld-className",t).val(r.className),t.data("fieldData",r),s=o.fieldRender(r,e,!0),n.html(s),$("input[toggle]",n).kcToggle()},a.debounce=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var s=this,i=arguments,n=function(){t=null,o||e.apply(s,i)},r=o&&!t;clearTimeout(t),t=setTimeout(n,a),r&&e.apply(s,i)}},a.disabledTT={className:"frmb-tt",add:function(t){var s=e.messages.fieldNonEditable;if(s){var i=o.markup("p",s,{className:a.disabledTT.className});t.append(i)}},remove:function(e){$(".frmb-tt",e).remove()}},a.classNames=function(e,t){var a=void 0,s=t.type,i=t.style,n=e[0].querySelector(".fld-className").value,r=n.split(" "),l={button:"btn",submit:"btn"},c=l[s];if(c){if(i){for(a=0;a<r.length;a++){var d=new RegExp("(?:^|s)"+c+"-(.*?)(?:s|$)+","g"),u=r[a].match(d);u&&r.splice(a,1)}r.push(c+"-"+i)}r.push(c)}return o.unique(r).join(" ").trim()},a.closeConfirm=function(e,a){e=e||document.getElementsByClassName("form-builder-overlay")[0],a=a||document.getElementsByClassName("form-builder-dialog")[0],e.classList.remove("visible"),a.remove(),e.remove(),document.dispatchEvent(t.events.modalClosed)},a.editorLayout=function(e){var t={left:{stage:"pull-right",controls:"pull-left"},right:{stage:"pull-left",controls:"pull-right"}};return t[e]?t[e]:""},a.showOverlay=function(){var e=o.markup("div",null,{className:"form-builder-overlay"});return document.body.appendChild(e),e.classList.add("visible"),e.onclick=function(){a.closeConfirm(e)},e},a.confirm=function(t,s){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=a.showOverlay(),l=o.markup("button",e.messages.yes,{className:"yes btn btn-success btn-sm"}),c=o.markup("button",e.messages.no,{className:"no btn btn-danger btn-sm"});c.onclick=function(){a.closeConfirm(r)},l.onclick=function(){s(),a.closeConfirm(r)};var d=o.markup("div",[c,l],{className:"button-wrap"});n="form-builder-dialog "+n;var u=o.markup("div",[t,d],{className:n});return i?u.classList.add("positioned"):(i={pageX:Math.max(document.documentElement.clientWidth,window.innerWidth||0)/2,pageY:Math.max(document.documentElement.clientHeight,window.innerHeight||0)/2},u.style.position="fixed"),u.style.left=i.pageX+"px",u.style.top=i.pageY+"px",document.body.appendChild(u),l.focus(),u},a.dialog=function(e){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";a.showOverlay(),i="form-builder-dialog "+i;var n=o.markup("div",e,{className:i});return s?n.classList.add("positioned"):(s={pageX:Math.max(document.documentElement.clientWidth,window.innerWidth||0)/2,pageY:Math.max(document.documentElement.clientHeight,window.innerHeight||0)/2},n.style.position="fixed"),n.style.left=s.pageX+"px",n.style.top=s.pageY+"px",document.body.appendChild(n),document.dispatchEvent(t.events.modalOpened),i.indexOf("data-dialog")!==-1&&document.dispatchEvent(t.events.viewData),n},a.removeAllfields=function(){var t=document.getElementById(e.formID),o=t.querySelectorAll("li.form-field"),s=$(o),i=[];if(!o.length)return!1;e.prepend&&i.push(!0),e.append&&i.push(!0),i.some(function(e){return e===!0})||(t.parentElement.classList.add("empty"),t.parentElement.dataset.content=e.messages.getStarted),t.classList.add("removing");var n=0;s.each(function(){n+=$(this).outerHeight()+3}),o[0].style.marginTop=-n+"px",setTimeout(function(){s.remove(),document.getElementById(e.formID).classList.remove("removing"),a.save()},400)},a.setFieldOrder=function(e){a.setFieldOrderByKey(e,"type")},a.setFieldOrderByName=function(e){a.setFieldOrderByKey(e,"name")},a.setFieldOrderByKey=function(a,o){if(!e.sortableControls)return!1;var s={},i=t.controlItemDomList?t.controlItemDomList():a.children();i.each(function(e,t){s[e]=$(t).data("attrs")[o]}),window.sessionStorage&&window.sessionStorage.setItem("fieldOrder",window.JSON.stringify(s))},a.orderFields=function(e){return a.orderFieldsByKey(e,"type")},a.orderFieldsByName=function(e){return a.orderFieldsByKey(e,"name")},a.orderFieldsByKey=function(t,a){var s=!1;if(window.sessionStorage&&(e.sortableControls?s=window.sessionStorage.getItem("fieldOrder"):window.sessionStorage.removeItem("fieldOrder")),s)s=window.JSON.parse(s),s=Object.keys(s).map(function(e){return s[e]});else{var i=e.controlOrder.concat(t.map(function(e){return e.attrs[a]}));s=o.unique(i)}var n=[];return s.forEach(function(e){var o=t.filter(function(t){return t.attrs[a]===e})[0];n.push(o)}),n.filter(Boolean)},a.closeAllEdit=function(e){var t=$("> li.editing",e),a=$(".toggle-form",e),o=$(".frm-holder",t);a.removeClass("open"),t.removeClass("editing"),o.hide(),$(".prev-holder",t).show()},a.toggleEdit=function(e){var t=document.getElementById(e),a=$(".toggle-form",t),o=$(".frm-holder",t);t.classList.toggle("editing"),a.toggleClass("open"),$(".prev-holder",t).slideToggle(250),o.slideToggle(250)},a.stickyControls=function(e,t){var a=$(t).parent(),o=e.parent(),s=a.width(),i=t.getBoundingClientRect();$(window).scroll(function(){var e=$(this).scrollTop();if(e>o.offset().top){var n={position:"fixed",width:s,top:0,bottom:"auto",right:"auto",left:i.left-9},r=a.offset(),l=o.offset(),c=r.top+a.height(),d=l.top+o.height();c>d&&r.top!==l.top&&a.css({position:"absolute",top:"auto",bottom:0,right:0,left:"auto"}),(c<d||c===d&&r.top>e)&&a.css(n)}else t.parentElement.removeAttribute("style")})},a.showData=function(){var s=o.escapeHtml(t.formData),i=o.markup("code",s,{className:"formData-"+e.dataType}),n=o.markup("pre",i);a.dialog(n,null,"data-dialog")},a.removeField=function(o){var s=!1,i=document.getElementById(e.formID),n=i.getElementsByClassName("form-field");if(!n.length)return console.warn("No fields to remove"),!1;if(!o){var r=[].slice.call(n).map(function(e){return e.id});console.warn("fieldID required to use `removeField` action."),console.warn("Available IDs: "+r.join(", "))}var l=document.getElementById(o),c=$(l);return l?(c.slideUp(250,function(){if(c.removeClass("deleting"),c.remove(),s=!0,a.save(),!i.childNodes.length){var t=i.parentElement;t.classList.add("empty"),t.dataset.content=e.messages.getStarted}}),document.dispatchEvent(t.events.fieldRemoved),s):(console.warn("Field not found"),!1)},a}function formBuilderEventsFn(){var e={};return e.loaded=new Event("loaded"),e.viewData=new Event("viewData"),e.userDeclined=new Event("userDeclined"),e.modalClosed=new Event("modalClosed"),e.modalOpened=new Event("modalOpened"),e.formSaved=new Event("formSaved"),e.fieldAdded=new Event("fieldAdded"),e.fieldRemoved=new Event("fieldRemoved"),e}"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),"function"!=typeof Event&&!function(){window.Event=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}}(),"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var a=arguments[t];if(null!=a)for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e}),"function"!=typeof Object.create&&(Object.create=function(e){var t=function(){};return function(a,o){if(a!==Object(a)||null!==a)throw TypeError("Argument must be an object, or null");t.prototype=a||{};var s=new t;return t.prototype=null,o!==e&&Object.defineProperties(s,o),null===a&&(s.__proto__=null),s}}());var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fbUtils={};fbUtils.inArray=function(e,t){return t.indexOf(e)!==-1},fbUtils.trimObj=function(e){var t=[null,void 0,"",!1,"false"];for(var a in e)fbUtils.inArray(e[a],t)?delete e[a]:Array.isArray(e[a])&&(e[a].length||delete e[a]);return e},fbUtils.validAttr=function(e){var t=["values","enableOther","other","label","subtype"];return!fbUtils.inArray(e,t)},fbUtils.attrString=function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&fbUtils.validAttr(a)&&(a=fbUtils.safeAttr(a,e[a]),t.push(a.name+a.value));return t.join(" ")},fbUtils.safeAttr=function(e,t){e=fbUtils.safeAttrName(e);var a=void 0;return t&&(Array.isArray(t)?a=fbUtils.escapeAttr(t.join(" ")):("boolean"==typeof t&&(t=t.toString()),a=fbUtils.escapeAttr(t.replace(","," ").trim()))),t=t?'="'+a+'"':"",{name:e,value:t}},fbUtils.safeAttrName=function(e){var t={className:"class"};return t[e]||fbUtils.hyphenCase(e)},fbUtils.hyphenCase=function(e){return e=e.replace(/[^\w\s\-]/gi,""),e=e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}),e.replace(/\s/g,"-").replace(/^-+/g,"")},fbUtils.camelCase=function(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})},fbUtils.markup=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=void 0,s=document.createElement(e),i=function(e){return Array.isArray(e)?"array":"undefined"==typeof e?"undefined":_typeof(e)},n={string:function(e){s.innerHTML=e},object:function(e){return s.appendChild(e)},array:function(e){for(var t=0;t<e.length;t++)o=i(e[t]),n[o](e[t])}};for(var r in a)if(a.hasOwnProperty(r)){var l=fbUtils.safeAttrName(r);s.setAttribute(l,a[r])}return o=i(t),t&&n[o].call(this,t),s},fbUtils.parseAttrs=function(e){var t=e.attributes,a={};return fbUtils.forEach(t,function(e){var o=t[e].value;o.match(/false|true/g)?o="true"===o:o.match(/undefined/g)&&(o=void 0),o&&(a[t[e].name]=o)}),a},fbUtils.parseOptions=function(e){var t=e.getElementsByTagName("option"),a={},o=[];if(t.length)for(var s=0;s<t.length;s++)a=fbUtils.parseAttrs(t[s]),a.label=t[s].textContent,o.push(a);return o},fbUtils.parseXML=function(e){var t=new window.DOMParser,a=t.parseFromString(e,"text/xml"),o=[];if(a)for(var s=a.getElementsByTagName("field"),i=0;i<s.length;i++){var n=fbUtils.parseAttrs(s[i]);s[i].children&&s[i].children.length&&(n.values=fbUtils.parseOptions(s[i])),o.push(n)}return o},fbUtils.escapeHtml=function(e){var t=document.createElement("textarea");return t.textContent=e,t.innerHTML},fbUtils.escapeAttr=function(e){function t(e){return a[e]||e}var a={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"};return"string"==typeof e?e.replace(/["&<>]/g,t):e},fbUtils.escapeAttrs=function(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]=fbUtils.escapeAttr(e[t]));return e},fbUtils.forEach=function(e,t,a){for(var o=0;o<e.length;o++)t.call(a,o,e[o])},fbUtils.unique=function(e){return e.filter(function(e,t,a){return a.indexOf(e)===t})},fbUtils.fieldRender=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="",s="",i="",n=e.label||"",r=e.description||"",l="",c=e.values;e.name=a?e.name+"-preview":e.name,e.id=e.name,e.name=e.multiple?e.name+"[]":e.name,e.type=e.subtype||e.type,""===n&&e.enableCustomizedLabel&&(n=e.customizedLabel||""),e.required&&(e.required=null,e["aria-required"]="true",l='<span class="required">*</span>'),"hidden"!==e.type&&(r&&(r='<span class="tooltip-element" tooltip="'+r+'">?</span>'),s='<label for="'+e.id+'" class="fb-'+e.type+'-label">'+n+" "+l+" "+r+"</label>");var d=e.label;delete e.label,delete e.description;var u=fbUtils.attrString(e);switch(e.type){case"textarea":case"rich-text":delete e.type;var p=e.value||"";o=s+"<textarea "+u+">"+p+"</textarea>";break;case"select":var f;if(e.type=e.type.replace("-group",""),c){e.placeholder&&(i+="<option disabled selected>"+e.placeholder+"</option>");for(var m=0;m<c.length;m++)c[m].selected&&!e.placeholder||delete c[m].selected,c[m].label||(c[m].label=""),f=fbUtils.attrString(c[m]),i+="<option "+f+">"+c[m].label+"</option>"}o=s+"<select "+u+">"+i+"</select>";break;case"checkbox-group":case"radio-group":var h=void 0;if(e.type=e.type.replace("-group",""),"checkbox"===e.type&&(e.name=e.name+"[]"),c){for(var v=void 0,b=0;b<c.length;b++)h=Object.assign({value:"",label:""},e,c[b]),h.selected&&(delete h.selected,h.checked=null),h.id=e.id+"-"+b,v=fbUtils.attrString(h),i+="<input "+v+' /> <label for="'+h.id+'">'+h.label+"</label><br>";if(e.other){var g={id:e.id+"-other",className:e.className+" other-option",onclick:"fbUtils.otherOptionCB('"+e.id+"-other')"};v=fbUtils.attrString(Object.assign({},e,g)),i+="<input "+v+' /> <label for="'+g.id+'">'+t.messages.other+'</label> <input type="text" name="'+e.name+'" id="'+g.id+'-value" style="display:none;" />'}}o=s+'<div class="'+e.type+'-group">'+i+"</div>";break;case"text":case"password":case"email":case"number":case"file":case"hidden":case"date":case"tel":case"autocomplete":o=s+" <input "+u+">";break;case"color":o=s+" <input "+u+"> "+t.messages.selectColor;break;case"button":case"submit":o="<button "+u+">"+d+"</button>";break;case"checkbox":o="<input "+u+"> "+s,e.toggle&&setTimeout(function(){$(document.getElementById(e.id)).kcToggle()},100);break;default:o="<"+e.type+" "+u+">"+d+"</"+e.type+">"}if("hidden"!==e.type){var y=e.id?"fb-"+e.type+" form-group field-"+e.id:"";o=fbUtils.markup("div",o,{className:y})}else o=fbUtils.markup("input",null,e);return o},fbUtils.otherOptionCB=function(e){var t=document.getElementById(e),a=document.getElementById(e+"-value");t.checked?(t.style.display="none",a.style.display="inline-block"):(t.style.display="inline-block",a.style.display="none")},fbUtils.capitalize=function(e){return e.replace(/\b\w/g,function(e){return e.toUpperCase()})},fbUtils.extend=function(e,t){var a=function(){e.apply(this,arguments)};a.prototype=Object.create(e.prototype),a.prototype.constructor=a;for(var o in t)a.prototype[o]=t[o];return a.superclass=e.prototype,a},function(e){var t=function(t,a){var o={theme:"fresh",messages:{off:"Off",on:"On"}},s=e.extend(o,a),i=e('<div class="kc-toggle"/>').insertAfter(t).append(t);i.toggleClass("on",t.is(":checked"));var n='<div class="kct-on">'+s.messages.on+"</div>",r='<div class="kct-off">'+s.messages.off+"</div>",l='<div class="kct-handle"></div>',c='<div class="kct-inner">'+n+l+r+"</div>";i.append(c),i.click(function(){t.attr("checked",!t.attr("checked")),e(this).toggleClass("on")})};e.fn.kcToggle=function(a){var o=this;return o.each(function(){var o=e(this);if(!o.data("kcToggle")){var s=new t(o,a);o.data("kcToggle",s)}})}}(jQuery),"undefined"==typeof window.neon&&(window.neon=new Object),window.neon.Builder=function(e){var t=fbUtils,a=function(e,t){var a={controlPosition:"left",controlOrder:[],dataType:"json",disableFields:[],editOnAdd:!1,defaultFields:[],fieldRemoveWarn:!1,messages:{addOption:"Add Option +",allFieldsRemoved:"All fields were removed.",allowSelect:"Allow Select",allowMultipleFiles:"Allow users to upload multiple files",autocomplete:"Autocomplete",button:"Button",cannotBeEmpty:"This field cannot be empty",checkboxGroup:"Checkbox Group",checkbox:"Checkbox",checkboxes:"Checkboxes",checked:"Checked",className:"Class",clearAllMessage:"Are you sure you want to clear all fields?",clearAll:"Clear",close:"Close",content:"Content",copy:"Copy To Clipboard",copyButton:"&#43;",copyButtonTooltip:"Copy",customizedLabel:"Label",dateField:"Date Field",description:"Help Text",descriptionField:"Description",devMode:"Developer Mode",defaultLabel:"Default Label",editNames:"Edit Names",editorTitle:"Form Elements",editXML:"Edit XML",enableCustomizedLabel:"Customized Label",enableOther:"Enable &quot;Other&quot;",enableOtherMsg:"Let users to enter an unlisted option",fieldDeleteWarning:!1,fieldVars:"Field Variables",fieldNonEditable:"This field cannot be edited.",fieldRemoveWarning:"Are you sure you want to remove this field?",fileUpload:"File Upload",formUpdated:"Form Updated",getStarted:"Drag a field from the right to this area",header:"Header",hide:"Edit",hidden:"Hidden Input",hiddenField:"Hidden",label:"Label",labelEmpty:"Field Label cannot be empty",limitRole:"Limit access to one or more of the following roles:",mandatory:"Mandatory",maxlength:"Max Length",minOptionMessage:"This field requires a minimum of 2 options",multipleFiles:"Multiple Files",name:"Name",no:"No",number:"Number",off:"Off",on:"On",option:"Option",optional:"optional",optionLabelPlaceholder:"Label",optionValuePlaceholder:"Value",optionEmpty:"Option value required",other:"Other",paragraph:"Paragraph",placeholder:"Placeholder",placeholders:{value:"Value",label:"Label",text:"",textarea:"",email:"Enter you email",placeholder:"",className:"space separated classes",password:"Enter your password"},preview:"Preview",radioGroup:"Radio Group",radio:"Radio",removeMessage:"Remove Element",removeOption:"Remove Option",remove:"&#215;",required:"Required",richText:"Rich Text Editor",roles:"Access",save:"Save",selectOptions:"Options",select:"Select",selectColor:"Select Color",selectionsMessage:"Allow Multiple Selections",size:"Size",sizes:{xs:"Extra Small",sm:"Small",m:"Default",lg:"Large"},style:"Style",styles:{btn:{"default":"Default",danger:"Danger",info:"Info",primary:"Primary",success:"Success",warning:"Warning"}},subtype:"Type",text:"Text Field",textArea:"Text Area",toggle:"Toggle",warning:"Warning!",value:"Value",viewJSON:"{  }",viewXML:"&lt;/&gt;",yes:"Yes"},notify:{error:function(e){return console.error(e)},success:function(e){return console.log(e)},warning:function(e){return console.warn(e)}},stickyControls:!1,showActionButtons:!0,prefix:"neon-form-builder-"};a.messages.subtypes=function(){var e=function(e){return{label:e,value:e}};return{text:["text","password","email","color","tel"].map(e),header:["h1","h2","h3"].map(e),button:["button","submit","reset"].map(e),paragraph:["p","address","blockquote","canvas","output"].map(e)}}(),this.opts=Object.assign({},a,e),e.messages&&(this.opts.messages=Object.assign({},a.messages,e.messages)),this.element=t,this._helpers=formBuilderHelpersFn(this.opts,this),this.layout=this._helpers.editorLayout(this.opts.controlPosition)};return a.prototype.init=function(){this.frmbID=this.genFrmbID(),this.opts.formID=this.frmbID},a.prototype.buildControlBox=function(){var a=this.opts,o=a.frmbFields,s=this.createControlBoxDom(o);this.$cbUL=s;var i=this.controlItemDomList(),n=this.controlItemDataList(o);t.forEach(i,function(t){var a=e(i[t]);a.data("newFieldData",n[t]),a.data("attrs",n[t].attrs),a.attr("type",n[t].attrs.type),a.attr("name",n[t].attrs.name),a.attr("label",n[t].label)}),a.sortableControls&&s.addClass("sort-enabled")},a.prototype.buildFieldBox=function(){var e=this.createFieldBoxDom();this.lastID=this.frmbID+"-fld-1",this.$sortableFields=e},a.prototype.bindControlBoxEvents=function(){var t=this,a=this._helpers,o=this.$sortableFields,s=this.$cbUL,i=this.opts;s.sortable({helper:"clone",items:t.controlItemSelector(),opacity:.9,connectWith:o,cancel:".control-disabled,.fb-separator",cursor:"move",scroll:!1,placeholder:"ui-state-highlight",start:a.startMoving,stop:a.stopMoving,revert:150,beforeStop:a.beforeStop,distance:3,update:function(e,n){return!a.doCancel&&void(n.item.parent()[0]===o[0]?(t.processControl(n.item),a.doCancel=!0):(a.setFieldOrderByName(s),a.doCancel=!i.sortableControls))}}),e(t.$cbUL).on("click",t.controlItemSelector(),function(o){e(this).hasClass("control-disabled")||(a.stopIndex=void 0,t.processControl(e(this)),a.save())})},a.prototype.bindFieldBoxEvents=function(){var t=this.$sortableFields,o=this._helpers;t.sortable({cursor:"move",opacity:.9,revert:150,beforeStop:o.beforeStop,start:o.startMoving,stop:o.stopMoving,cancel:"input, select, .disabled, .form-group, .btn",placeholder:"frmb-placeholder"}),a.prototype.saveAndUpdate=o.debounce(function(t){if(t&&"keyup"===t.type&&"className"===this.name)return!1;var a=e(this).parents(".form-field:eq(0)");o.updatePreview(a),o.save()}),t.on("change blur keyup",".form-elements input, .form-elements select, .form-elements textarea",this.saveAndUpdate)},a.prototype.processControl=function(e){this.prepFieldVars(e,!0)},a.prototype.render=function(){var a=this.frmbID,o=this._helpers,s=this.opts,i=e("<div/>",{id:a+"-form-wrap","class":"form-wrap form-builder"+o.mobileClass()}),n=e("<div/>",{id:a+"-stage-wrap","class":"stage-wrap "+this.layout.stage}),r=e("<div/>",{id:a+"-cb-wrap","class":"cb-wrap "+this.layout.controls}).append(this.$cbUL[0]);if(s.showActionButtons){var l="xml"===s.dataType?s.messages.viewXML:s.messages.viewJSON,c=t.markup("button",l,{id:a+"-view-data",type:"button",className:"view-data btn btn-default"}),d=t.markup("button",s.messages.clearAll,{id:a+"-clear-all",type:"button",className:"clear-all btn btn-default"}),u=t.markup("button",s.messages.save,{className:"btn btn-primary "+s.prefix+"save",id:a+"-save",type:"button"}),p=t.markup("div",[d,c,u],{className:"form-actions btn-group"});r.append(p)}n.append(this.$sortableFields,r),n.before(i),i.append(n,r),e(this.element).append(i),this.$stageWrap=n},a.prototype.create=function(){this.init(),this.buildControlBox(),this.buildFieldBox(),this.render(),this.bindControlBoxEvents(),this.bindFieldBoxEvents(),this.bindEvents(),this.opts.showActionButtons&&this.bindActionButtonEvents(),this._helpers.getData(),this.loadFields(),this.$sortableFields.css("min-height",this.$cbUL.height()),this.opts.stickyControls&&this._helpers.stickyControls(this.$sortableFields,this.$cbUL.get(0)),document.dispatchEvent(this.events.loaded)},a.prototype.genFrmbID=function(){},a.prototype.createControlBoxDom=function(e){},a.prototype.controlItemSelector=function(){},a.prototype.controlItemDataList=function(e){},a.prototype.createFieldBoxDom=function(){},a.prototype.prepFieldVars=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]},a.prototype.bindEvents=function(){},a.prototype.loadFields=function(){},a.prototype.controlItemDomList=function(){return e(this.controlItemSelector(),this.$cbUL)},a.prototype.bindActionButtonEvents=function(){var t=this.opts,a=this.frmbID,o=this._helpers,s=e(document.getElementById(a+"-view-data"));s.click(function(e){e.preventDefault(),o.showData()});var i=e(document.getElementById(a+"-clear-all"));i.click(function(){var a=e("li.form-field"),s=this.getBoundingClientRect(),i=document.body.getBoundingClientRect(),n={pageX:s.left+s.width/2,pageY:s.top-i.top-12};a.length?o.confirm(t.messages.clearAllMessage,function(){o.removeAllfields(),t.notify.success(t.messages.allFieldsRemoved),o.save()},n):o.dialog("There are no fields to clear",{pageX:n.pageX,pageY:n.pageY})}),e(document.getElementById(a+"-save")).click(function(e){e.preventDefault(),o.save()})},a}(jQuery),window.neon.VerticalFormBuilder=function(e){var t=fbUtils,a=fbUtils.extend(neon.Builder,{genFrmbID:function(){var t=this.opts.type;return"frmb-"+t+"-"+e("ul[id^=frmb-"+t+"]-").length++},createControlBoxDom:function(a){var o=this.frmbID+"-control-box",s=t.markup("ul",null,{id:o,className:"frmb-control"}),i=e(s),n=e("<input/>",{"class":"form-control",id:"nfb-filter-box",type:"input",placeholder:"Type to search..."}),r=e("<div/>",{"class":"objectTree",id:"nfb-field-tree"});return n.appendTo(i),r.treeview({levels:1,showBorder:!1,highlightSelected:!1,data:a}).appendTo(i),n.on("keyup",function(t){if(""!=e("#nfb-filter-box").val()){var a=e("#nfb-filter-box").val(),o={ignoreCase:!0,exactMatch:!1,filterResults:!0};e("#nfb-field-tree").treeview("search",[a,o])}else e("#nfb-field-tree").treeview("clearSearch")}),i},controlItemSelector:function(){return"li.list-group-item:not(.node-parent)"},controlItemDataList:function(e){var t=[];return e.forEach(function(e){e.nodes&&e.nodes.length&&e.nodes.forEach(function(e){t.push(e)})}),t},createFieldBoxDom:function(){return e("<ul/>").attr("id",this.frmbID).addClass("frmb")},prepFieldVars:function(a){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s={};if(a instanceof jQuery){var i=a.data("newFieldData");if(i)s=i.attrs,s.label=i.label;else{var n=a[0].attributes;o||(s.values=a.children().map(function(t,a){return{label:e(a).text(),value:e(a).attr("value"),selected:Boolean(e(a).attr("selected"))}}));for(var r=n.length-1;r>=0;r--)s[n[r].name]=n[r].value}}else s=Object.assign({},a);o&&t.inArray(s.type,["text","number","file","select","textarea"])?s.className="form-control":s.className=s["class"]||s.className;var l=/(?:^|\s)btn-(.*?)(?:\s|$)/g.exec(s.className);if(l&&(s.style=l[1]),t.escapeAttrs(s),this.appendNewField(s),o)this.toggleControlDisabled(a),document.dispatchEvent(this.events.fieldAdded);else{var c=e("#nfb-field-tree").treeview("getNodeByName",s.name);c.controlDisabled=!0}this.$stageWrap.removeClass("empty")},loadFields:function(){var t=this,a=this.opts,o=this.$stageWrap,s=this.$sortableFields,i=this._helpers,n=this.formData;if(n&&n.length){for(var r=0;r<n.length;r++)this.prepFieldVars(n[r]);o.removeClass("empty")}else a.defaultFields&&a.defaultFields.length?(a.defaultFields.forEach(function(e){return t.prepFieldVars(e)}),o.removeClass("empty")):a.prepend||a.append||o.addClass("empty").attr("data-content",a.messages.getStarted);i.save(),e("li.form-field:not(.disabled)",s).each(function(){i.updatePreview(e(this))})}});return a.prototype.appendNewField=function(a){var o=this.opts,s=this.lastID,i=this._helpers,n=this.$sortableFields,r=a.type||"text",l=a.label||o.messages[r]||o.messages.label,c=t.markup("a",o.messages.remove,{id:"del_"+s,className:"del-button btn delete-confirm",title:o.messages.removeMessage}),d=t.markup("a",null,{
id:s+"-edit",className:"toggle-form btn icon-pencil",title:o.messages.hide}),u=(t.markup("a",o.messages.copyButton,{id:s+"-copy",className:"copy-button btn icon-copy",title:o.messages.copyButtonTooltip}),t.markup("div",[d,c],{className:"field-actions"}).outerHTML);u+='<label class="field-label">'+l+"</label>",a.description&&(u+='<span class="tooltip-element" tooltip="'+a.description+'">?</span>');var p=a.required?'style="display:inline"':"";u+='<span class="required-asterisk" '+p+"> *</span>",u+=t.markup("div","",{className:"prev-holder"}).outerHTML,u+='<div id="'+s+'-holder" class="frm-holder">',u+='<div class="form-elements">',u+=this.advFields(a),u+=t.markup("a",o.messages.close,{className:"close-field"}).outerHTML,u+="</div>",u+="</div>";var f=t.markup("li",u,{"class":r+"-field form-field",type:r,name:a.name,id:s}),m=e(f);m.data("fieldData",{attrs:a}),"undefined"!=typeof i.stopIndex?e(n).children().eq(i.stopIndex).before(m):n.append(m),e(".sortable-options",m).sortable({update:function(){i.updatePreview(m)}}),e('[name="customizedLabel"]',m).trigger("keyup"),i.updatePreview(m),o.editOnAdd&&(i.closeAllEdit(n),i.toggleEdit(s)),this.lastID=i.incrementId(s)},a.prototype.advFields=function(e){var a=this.opts,o=(this.lastID,[]),s=["select","checkbox-group","radio-group"],i=function(){return s.indexOf(e.type)!==-1}(),n=!t.inArray(e.type,["header","paragraph","file"].concat(s));void 0!==e.role?e.role.split(","):[];if(o.push(this.staticAttribute("label",e,{first:a.messages.defaultLabel})),o.push(this.requiredField(e)),o.push(this.boolAttribute("hidden",e,{first:a.messages.hiddenField})),o.push(this.boolAttribute("enableCustomizedLabel",e,{first:a.messages.enableCustomizedLabel})),o.push(this.textAttribute("customizedLabel",e,{first:a.messages.customizedLabel})),e.size=e.size||"m",e.style=e.style||"default",t.inArray(e.type,["header","paragraph","button"])||o.push(this.textAttribute("description",e)),"button"===e.type&&o.push(this.btnStyles(e.style,e.type)),"number"===e.type&&(o.push(this.numberAttribute("min",e)),o.push(this.numberAttribute("max",e)),o.push(this.numberAttribute("step",e))),o.push(this.textAttribute("placeholder",e)),o.push(this.textAttribute("className",e)),o.push(this.textAttribute("name",e)),n&&("checkbox"===e.type?o.push(this.boolAttribute("checked",e,{first:a.messages.checked})):o.push(this.textAttribute("value",e))),"file"===e.type){var r={first:a.messages.multipleFiles,second:a.messages.allowMultipleFiles};o.push(this.boolAttribute("multiple",e,r))}return i&&o.push(this.fieldDefaultOptions(e)),o.join("")},a.prototype.staticAttribute=function(e,t,a){var o=function(e){return"<label>"+e+"</label>"},s=t[e],i='<span static-attribute-key="'+e+'">'+s+"</span>",n=[],r=[i];return a.first&&n.unshift(o(a.first)),r.unshift('<div class="input-wrap">'),r.push("</div>"),'<div class="form-group '+e+'-wrap">'+n.concat(r).join("")+"</div>"},a.prototype.boolAttribute=function(e,t,a){var o=this.lastID,s=function(t){return'<label for="'+e+"-"+o+'">'+t+"</label>"},i=void 0!==t[e]?"checked":"",n='<input type="checkbox" class="fld-'+e+'" name="'+e+'" value="true" '+i+' id="'+e+"-"+o+'"/> ',r=[],l=[n];return a.first&&r.unshift(s(a.first)),a.second&&l.push(s(a.second)),a.content&&l.push(a.content),l.unshift('<div class="input-wrap">'),l.push("</div>"),'<div class="form-group '+e+'-wrap">'+r.concat(l).join("")+"</div>"},a.prototype.btnStyles=function(e,t){var a=this.opts,o={button:"btn"},s=a.messages.styles[o[t]],i="";if(s){var n="<label>"+a.messages.style+"</label>";i+='<input value="'+e+'" name="style" type="hidden" class="btn-style">',i+='<div class="btn-group" role="group">',Object.keys(a.messages.styles[o[t]]).forEach(function(s){var n=e===s?"active":"";i+='<button value="'+s+'" type="'+t+'" class="'+n+" btn-xs "+o[t]+" "+o[t]+"-"+s+'">'+a.messages.styles[o[t]][s]+"</button>"}),i+="</div>",i='<div class="form-group style-wrap">'+n+" "+i+"</div>"}return i},a.prototype.numberAttribute=function(e,a){var o=this.opts,s=this.lastID,i=a[e],n=o.messages[e]||e,r=o.messages.placeholders[e],l={type:"number",value:i,name:e,min:"0",placeholder:r,className:"fld-"+e+" form-control",id:e+"-"+s},c="<input "+t.attrString(t.trimObj(l))+">",d='<div class="input-wrap">'+c+"</div>";return'<div class="form-group '+e+'-wrap"><label for="'+l.id+'">'+n+"</label> "+d+"</div>"},a.prototype.selectAttribute=function(e,a,o){var s=this.opts,i=this.lastID,n=o.map(function(o,i){var n=Object.assign({label:s.messages.option+" "+i,value:void 0},o);return o.value===a[e]&&(n.selected=!0),"<option "+t.attrString(t.trimObj(n))+">"+n.label+"</option>"}),r={id:e+"-"+i,name:e,className:"fld-"+e+" form-control"},l='<label for="'+r.id+'">'+(s.messages[e]||t.capitalize(e))+"</label>",c="<select "+t.attrString(r)+">"+n.join("")+"</select>",d='<div class="input-wrap">'+c+"</div>";return'<div class="form-group '+r.name+'-wrap">'+l+d+"</div>"},a.prototype.textAttribute=function(e,a){var o=this.opts,s=this.lastID,i=["text","textarea","select"],n=["header"],r=["paragraph"],l=a[e]||"",c=o.messages[e];"label"===e&&t.inArray(a.type,r)&&(c=o.messages.content),n=n.concat(o.messages.subtypes.header,r);var d=o.messages.placeholders,u=d[e]||"",p="",f=[];if("placeholder"!==e||t.inArray(a.type,i)||f.push(!0),"name"===e&&t.inArray(a.type,n)&&f.push(!0),!f.some(function(e){return e===!0})){var m={name:e,placeholder:u,className:"fld-"+e+" form-control",id:e+"-"+s},h='<label for="'+m.id+'">'+c+"</label>";"label"===e&&t.inArray(a.type,r)||"value"===e&&"textarea"===a.type?p+="<textarea "+t.attrString(m)+">"+l+"</textarea>":(m.value=l,m.type="text",p+="<input "+t.attrString(m)+">");var v='<div class="input-wrap">'+p+"</div>";p="name"===e||"className"===e?'<div class="form-group '+e+'-wrap" style="display:none;">'+h+" "+v+"</div>":'<div class="form-group '+e+'-wrap">'+h+" "+v+"</div>"}return p},a.prototype.requiredField=function(e){var a=this.opts,o=["header","paragraph","button"],s=[],i="";return t.inArray(e.type,o)&&s.push(!0),s.some(function(e){return e===!0})||(i=this.boolAttribute("required",e,{first:a.messages.required})),i},a.prototype.fieldDefaultOptions=function(e){var a=this.opts;if(!e.values||!e.values.length)return"";var o=['<label class="false-label">'+a.messages.selectOptions+"</label>"],s=e.multiple||"checkbox-group"===e.type;return e.values.forEach(function(e){return Object.assign({},{selected:!1},e)}),o.push('<div class="input-wrap">'),s?e.values.forEach(function(e){e.selected?o.push('<input class="js_cb_option" type="checkbox" value="'+e.value+'" data-label="'+e.label+'" checked="true"></input>  '+e.label+"  "):o.push('<input class="js_cb_option" type="checkbox" value="'+e.value+'" data-label="'+e.label+'"></input>  '+e.label+"  ")}):(o.push('<select class="form-control">'),e.values.forEach(function(e){e.selected?o.push('<option value="'+e.value+'">'+e.label+"</option>"):o.push('<option value="'+e.value+'" selected="true">'+e.label+"</option>")}),o.push("</select>")),o.push("</div>"),t.markup("div",o.join(""),{className:"form-group field-options"}).outerHTML},a.prototype.fieldOptions=function(e){var a=this.opts,o=this,s=[t.markup("a",a.messages.addOption,{className:"add add-opt"})],i=['<label class="false-label">'+a.messages.selectOptions+"</label>"],n=e.multiple||"checkbox-group"===e.type;return e.values&&e.values.length?e.values.forEach(function(e){return Object.assign({},{selected:!1},e)}):(e.values=[1,2,3].map(function(e){var o=a.messages.option+" "+e,s={selected:!1,label:o,value:t.hyphenCase(o)};return s}),e.values[0].selected=!0),i.push('<div class="sortable-options-wrap">'),i.push('<ol class="sortable-options">'),t.forEach(e.values,function(t){i.push(o.selectFieldOptions(e.name,e.values[t],n))}),i.push("</ol>"),i.push(t.markup("div",s,{className:"option-actions"}).outerHTML),i.push("</div>"),t.markup("div",i.join(""),{className:"form-group field-options"}).outerHTML},a.prototype.selectFieldOptions=function(e,a,o){var s=this.opts,i={selected:o?"checkbox":"radio"},n=["value","label","selected"],r=[];a=Object.assign({selected:!1,label:"",value:""},a);for(var l=n.length-1;l>=0;l--){var c=n[l];if(a.hasOwnProperty(c)){var d={type:i[c]||"text","class":"option-"+c,value:a[c],name:e+"-option"};s.messages.placeholders[c]&&(d.placeholder=s.messages.placeholders[c]),"selected"===c&&a.selected===!0&&(d.checked=a.selected),r.push(t.markup("input",null,d))}}var u={className:"remove btn",title:s.messages.removeMessage};r.push(t.markup("a",s.messages.remove,u));var p=t.markup("li",r);return p.outerHTML},a.prototype.cloneItem=function(t){var a=this.lastID,o=(this.opts,this._helpers),s=t.attr("id"),i=t.attr("type"),n=(new Date).getTime(),r=i+"-"+n,l=t.clone();return l.find("[id]").each(function(){this.id=this.id.replace(s,a)}),l.find("[for]").each(function(){this.setAttribute("for",this.getAttribute("for").replace(s,a))}),l.each(function(){e("e:not(.form-elements)").each(function(){var e=this.getAttribute("name");e=e.substring(0,e.lastIndexOf("-")+1),e+=n.toString(),this.setAttribute("name",e)})}),l.find(".form-elements").find(":input").each(function(){if("name"===this.getAttribute("name")){var e=this.getAttribute("value");e=e.substring(0,e.lastIndexOf("-")+1),e+=n.toString(),this.setAttribute("value",e)}}),l.attr("id",a),l.attr("name",r),l.addClass("cloned"),e(".sortable-options",l).sortable(),this.lastID=o.incrementId(a),l},a.prototype.bindEvents=function(){var a=this,o=this.opts,s=this._helpers,i=this.$sortableFields;i.on("click touchstart",".remove",function(t){var a=e(this).parents(".form-field:eq(0)");t.preventDefault();var i=e(this).parents(".sortable-options:eq(0)").children("li").length;i<=2?o.notify.error("Error: "+o.messages.minOptionMessage):e(this).parent("li").slideUp("250",function(){e(this).remove(),s.updatePreview(a),s.save()})}),i.on("touchstart","input",function(t){if(t.handled===!0)return!1;if("checkbox"===e(this).attr("type"))e(this).trigger("click");else{e(this).focus();var a=e(this).val();e(this).val(a)}}),i.on("click touchstart",".toggle-form, .close-field",function(t){if(t.stopPropagation(),t.preventDefault(),t.handled===!0)return!1;var a=e(this).parents(".form-field:eq(0)").attr("id");s.toggleEdit(a),t.handled=!0}),i.on("change",".prev-holder input, .prev-holder select",function(a){if(!a.target.classList.contains("other-option")){var o=e(a.target).closest("li.form-field")[0];t.inArray(o.type,["select","checkbox-group","radio-group"])?o.querySelector('[class="option-value"][value="'+a.target.value+'"]').parentElement.childNodes[0].checked=!0:document.getElementById("value-"+o.id).value=a.target.value,s.save()}}),i.on("keyup change",'[name="customizedLabel"]',function(){var t=e('[name="enableCustomizedLabel"]',i).is(":checked");t&&e(".field-label",e(this).closest("li")).text(e(this).val())}),i.on("change",'[name="enableCustomizedLabel"]',function(){var t=e(this).is(":checked"),a=e('[name="customizedLabel"]',i).val()||"";if(t)e(".field-label",e(this).closest("li")).text(a);else{var o=e.trim(e('[static-attribute-key="label"]',e(this).closest("li")).text());e(".field-label",e(this).closest("li")).text(o)}}),i.delegate("input.error","keyup",function(){e(this).removeClass("error")}),i.on("keyup",'input[name="description"]',function(){var t=e(this).parents(".form-field:eq(0)"),a=e(".tooltip-element",t),o=e(this).val();if(""!==o)if(a.length)a.attr("tooltip",o).css("display","inline-block");else{var s='<span class="tooltip-element" tooltip="'+o+'">?</span>';e(".field-label",t).after(s)}else a.length&&a.css("display","none")}),i.on("change",".fld-multiple",function(t){var a=t.target.checked?"checkbox":"radio";e(t.target).parents(".form-elements:eq(0)").find(".sortable-options input.option-selected").each(function(){this.type=a})}),i.on("blur","input.fld-name",function(){this.value=s.safename(this.value),""===this.value?e(this).addClass("field-error").attr("placeholder",o.messages.cannotBeEmpty):e(this).removeClass("field-error")}),i.on("blur","input.fld-maxlength",function(){this.value=s.forceNumber(this.value)}),i.on("click touchstart",".icon-copy",function(t){t.preventDefault();var o=e(this).parent().parent("li"),i=a.cloneItem(o);i.insertAfter(o),s.updatePreview(i),s.save()}),i.on("click touchstart",".delete-confirm",function(i){i.preventDefault();var n=this.getBoundingClientRect(),r=document.body.getBoundingClientRect(),l={pageX:n.left+n.width/2,pageY:n.top-r.top-12},c=e(this).parents(".form-field:eq(0)").attr("id"),d=e(this).parents(".form-field:eq(0)").attr("name"),u=e(document.getElementById(c));if(document.addEventListener("modalClosed",function(){u.removeClass("deleting")},!1),o.fieldRemoveWarn){var p=t.markup("h3",o.messages.warning),f=t.markup("p",o.messages.fieldRemoveWarning);s.confirm([p,f],function(){s.removeField(c);var e=a.conrolItemDomList().filter('[name="'+d+'"]');a.toggleControlDisabled(e)},l),u.addClass("deleting")}else{s.removeField(c);var m=a.controlItemDomList().filter('[name="'+d+'"]');a.toggleControlDisabled(m)}}),i.on("click",".style-wrap button",function(){var t=e(this).val(),o=e(this).parent(),s=o.prev(".btn-style");s.val(t),e(this).siblings(".btn").removeClass("active"),e(this).addClass("active"),a.saveAndUpdate.call(o)}),i.on("click","input.fld-required",function(){var t=e(this).parents("li.form-field").find(".required-asterisk");t.toggle()}),i.on("click","input.fld-access",function(){var t=e(this).parents("li.form-field").find("div.available-roles"),a=e(this);t.slideToggle(250,function(){a.is(":checked")||e('input[type="checkbox"]',t).removeAttr("checked")})}),i.on("click",".add-opt",function(t){t.preventDefault();var o=e(this).parents(".field-options:eq(0)"),s=e('[name="multiple"]',o),i=e(".option-selected:eq(0)",o),n=!1;n=s.length?s.prop("checked"):"checkbox"===i.attr("type");var r=i.attr("name");e(".sortable-options",o).append(a.selectFieldOptions(r,!1,n))}),i.on("mouseover mouseout",".remove, .del-button",function(){e(this).parents("li:eq(0)").toggleClass("delete")})},a.prototype.init=function(){a.superclass.init.call(this);var e=this.opts,t={text:"text-input",number:"number",select:"select",checkbox:"checkbox","checkbox-group":"checkbox-group","radio-group":"radio-group",textarea:"text-area",date:"calendar",file:"file-input",button:"button-input"};this.controlItemDataList(e.frmbFields).forEach(function(e){e.attrs.className=t[e.attrs.type]}),e.frmbFields.forEach(function(e){e.label&&!e.text&&(e.text=e.label),e.nodes&&e.nodes.length&&e.nodes.forEach(function(e){e.label&&!e.text&&(e.text=e.label)})})},a.prototype.toggleControlDisabled=function(t){!t instanceof jQuery&&(t=e(t));var a=t.data("nodeid"),o=e("#nfb-field-tree").treeview("getNode",a);o.controlDisabled?o.controlDisabled=!1:o.controlDisabled=!0,t.toggleClass("control-disabled"),e(this.$cbUL).sortable("refresh")},a}(jQuery),window.neon.HorizontalFormBuilder=function(e){var t=fbUtils.extend(neon.Builder,{});return t}(jQuery),function(e){e.fn.neonFormBuilder=function(t){return t=t||{},this.each(function(){var a;"vertical"==t.type?a=new neon.VerticalFormBuilder(t,this):"horizontal"==t.type&&(a=new neon.HorizontalFormBuilder(t,this)),a.create();var o={getData:function(){return a.formData},clearFields:a._helpers.removeAllfields,showData:a._helpers.showData,save:a._helpers.save,addField:function(e,t){a._helpers.stopIndex=a.$sortableFields[0].children.length?t:void 0,a.prepFieldVars(e),document.dispatchEvent(a.events.fieldAdded)},removeField:a._helpers.removeField,setData:function(e){a._helpers.removeAllfields(),a._helpers.getData(e),a.loadFields()}};return e(this).data("formBuilder",o),o})}}(jQuery);
//# sourceMappingURL=neon-form-builder.min.js.map
